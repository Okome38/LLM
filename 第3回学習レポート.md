# 第 3 回学習レポート

**学生 ID**: student_XXX
**氏名**: ○○○○
**日付**: 2026年1月19日

## 1. 知識ベース・オントロジーの理解

### 知識ベースとは

コンピュータが利用可能な形式で、体系的に整理・蓄積された知識の集合体のこと。辞書や百科事典のように、事実（Fact）、ルール（Rule）、関係（Relation）といった情報が構造化されて格納されている。RAGシステムにおいては、LLMが元々持たない最新・専門知識を提供し、回答の根拠を明確にするための外部情報源として機能する。

### オントロジーとは

ある特定の領域（ドメイン）における概念と、それらの概念間の関係性を形式的に定義した「設計図」のようなもの。例えば、「深さ優先探索」という概念があり、その前提知識として「木構造」や「スタック」が存在する、といった関係性を明示的に定義する。これにより、単なるキーワードのマッチングだけでなく、知識の構造に基づいた高度な情報処理が可能になる。

### オントロジーと構造化 RAG の違い

オントロジーが「概念の関係性を定義する設計図」であるのに対し、構造化RAGは「その設計図を活用して、構造化されたデータ（知識グラフなど）から情報を効率的に検索し、LLMに提供する仕組み」そのものを指す。例えるなら、オントロジーが辞書の「編集方針」で、構造化RAGは「その辞書を引く仕組み」に相当する。オントロジーは、構造化RAGがより賢く動作するための基盤となる。

### なぜ RAG にオントロジーが必要か

オントロジーがないRAGでは、以下の3つの主要な問題が発生する。
1.  **語彙の不一致**: 「繰り返し」と「ループ」のように、意味は同じでも表現が異なる単語を同一視できず、関連情報を見逃してしまう。
2.  **関係性の欠如**: 「B+木」の質問に対し、その前提知識である「B木」を理解しているか確認できず、学習者のレベルに合わない説明をしてしまう可能性がある。
3.  **知識の非展開**: 「ハッシュ法」について調べている学習者に対し、関連概念である「データベース」や「データ構造」といった、次に学ぶべき知識を提示することができない。

オントロジーは、これらの問題を解決する。同義語を定義して検索クエリを拡張し（解決策1）、前提知識チェーンをたどって適切な学習パスを提示し（解決策2）、関連概念を提示して学習の幅を広げる（解決策3）ことで、よりユーザに適応した高度な応答生成を実現する。

## 2. 実装した機能

- [x] オントロジークラス
- [x] 概念抽出器
- [x] 学習支援機能
- [x] ハイブリッド検索
- [x] 学習進捗 UI

## 3. ハイブリッド検索の効果

ベクトル検索は、文章全体の意味的な類似性に基づいて検索するため「繰り返し処理」→「ループ」のような、表現が違っても意味が近い文書を見つけるのが得意である。一方で、BM25（キーワード検索）は、「B+木」のような専門用語や型番など、キーワードが完全に一致する文書を正確に見つけ出すのが得意である。

ハイブリッド検索は、この両者の長所を組み合わせた手法である。今回の実装では、ベクトル検索のスコアとBM25のスコアに重み付けをして合算することで、専門用語などのキーワードに強く、かつ意味的な広がりも捉えられる、より精度の高い検索を実現できた。特に専門用語が多く出現する講義録のような文書に対しては、単体の検索手法よりも遥かに頑健な検索が可能になると考えられる。

## 4. テスト対策 RAG の改善（実施した場合）

### 追加したオントロジー

- 概念数: 7 個
- 主な概念: 木構造, 深さ優先探索, 幅優先探索, B木, ハッシュ法, メモリ管理, ガベージコレクション

### 改善効果

第2回の単純なベクトル検索RAGと比較して、今回のシステムはテスト対策において以下の点で大幅に改善された。

- **検索精度の向上**: 「DFS」という略語で質問しても、オントロジーの同義語定義（`synonyms: ["DFS", "Depth-First Search"]`）によって「深さ優先探索」の文書が正確にヒットするようになった。
- **前提知識の提示**: いきなり「ガベージコレクション」について質問すると、その前提知識である「メモリ管理」や「ヒープ領域」を先に学ぶよう促すことができ、体系的な理解を支援できるようになった。
- **よくある誤解の指摘**: 「ハッシュ法は常にO(1)ですか？」といった質問に対して、「ハッシュ衝突が起きると性能が劣化する」という、テストで狙われやすい「よくある誤解」を指摘し、より深い理解を促す回答を生成できるようになった。
- **適応的な説明**: 同じ「B木」に関する質問でも、学習者レベルを「初級」に設定すれば比喩を使った説明、「上級」に設定すればディスクI/Oの観点からの理論的な説明、というように、説明の粒度を動的に変更できるようになった。

これらの改善により、単に答えを提示するだけでなく、学習者の理解度を測り、知識の穴を埋め、次の学習ステップへと導く「対話的な家庭教師」のような役割を果たせるようになった。

## 5. 質問・感想

今回の課題を通して、RAGの背後にある様々な技術要素（オントロジー、ハイブリッド検索など）を実装することで、単純な情報検索システムから「学習支援システム」へと昇華させるプロセスを深く理解できた。特に、オントロジーという「知識の設計図」を定義することが、いかにAIの応答の質を向上させるか、その威力を実感した。今後は、自分の学習したい他の分野（例えば、機械学習や統計学）で、自分だけのオントロジーを構築してみたいと感じた。